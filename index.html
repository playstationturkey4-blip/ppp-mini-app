<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Penalty 2D First Person</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: linear-gradient(#87ceeb 0%, #cfefff 55%, #4caf50 55%);
  color: #fff;
}

.screen {
  min-height: 100vh;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.screen.active { display: flex; }

.card {
  width: 100%;
  max-width: 420px;
  background: rgba(10,90,35,0.95);
  border-radius: 20px;
  padding: 16px;
  box-shadow: 0 30px 60px rgba(0,0,0,0.45);
}

.title {
  text-align: center;
  font-size: 22px;
  font-weight: 900;
}

.stats {
  text-align: center;
  font-size: 14px;
  margin-bottom: 8px;
}

/* СТАДИОН (ПЕРСПЕКТИВА) */
.stadium {
  position: relative;
  width: 100%;
  height: 260px;
  background: linear-gradient(#9fd3ff 0%, #bfe6ff 45%, #3fa34d 45%);
  border-radius: 16px;
  overflow: hidden;
  cursor: crosshair;
}

/* ВОРОТА ВДАЛИ */
.goal {
  position: absolute;
  top: 35px;
  left: 50%;
  transform: translateX(-50%);
  width: 160px;
  height: 60px;
  border: 4px solid #fff;
  border-bottom: none;
}

/* ВРАТАРЬ В ГЛУБИНЕ */
.keeper {
  position: absolute;
  top: 60px;
  left: 50%;
  width: 20px;
  height: 30px;
  background: #ffcc00;
  border-radius: 5px;
  transform: translateX(-50%);
  transition: transform 0.4s ease;
}
.keeper::before {
  content: "";
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  width: 14px;
  height: 14px;
  background: #ffcc00;
  border-radius: 50%;
}

/* МЯЧ У ИГРОКА */
.ball {
  position: absolute;
  bottom: 22px;
  left: 50%;
  width: 26px;
  height: 26px;
  background: #fff;
  border: 3px solid #000;
  border-radius: 50%;
  transform: translateX(-50%);
  transition: transform 0.6s ease, width 0.6s ease, height 0.6s ease;
}

/* ПРИЦЕЛ */
.aim {
  position: absolute;
  width: 12px;
  height: 12px;
  border: 2px solid red;
  border-radius: 50%;
  pointer-events: none;
  display: none;
}

/* СИЛА */
.power-bar {
  height: 12px;
  background: #333;
  border-radius: 6px;
  overflow: hidden;
  margin-top: 10px;
}
.power-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, red, orange, lime, orange, red);
}

.result {
  text-align: center;
  font-weight: 700;
  min-height: 22px;
  margin-top: 6px;
}
</style>
</head>

<body>

<div class="screen active">
  <div class="card">
    <div class="title">Пенальти</div>
    <div class="stats" id="stats">Удар: 1 / 5</div>

    <div class="stadium" id="stadium">
      <div class="goal"></div>
      <div class="keeper" id="keeper"></div>
      <div class="ball" id="ball"></div>
      <div class="aim" id="aim"></div>
    </div>

    <div class="power-bar"><div class="power-fill" id="powerFill"></div></div>
    <div class="result" id="result">Наведи и бей</div>
  </div>
</div>

<script>
let power = 0;
let charging = false;
let canShoot = true;
let interval;

const stadium = document.getElementById('stadium');
const ball = document.getElementById('ball');
const keeper = document.getElementById('keeper');
const aim = document.getElementById('aim');
const powerFill = document.getElementById('powerFill');
const result = document.getElementById('result');

/* прицел */
stadium.addEventListener('mousemove', e => {
  if (!canShoot) return;
  const r = stadium.getBoundingClientRect();
  aim.style.left = e.clientX - r.left - 6 + 'px';
  aim.style.top = e.clientY - r.top - 6 + 'px';
  aim.style.display = 'block';
});

/* заряд */
stadium.addEventListener('mousedown', () => {
  if (!canShoot) return;
  charging = true;
  power = 0;
  powerFill.style.width = '0%';
  interval = setInterval(() => {
    power = Math.min(power + 2, 100);
    powerFill.style.width = power + '%';
  }, 30);
});

/* удар */
stadium.addEventListener('mouseup', e => {
  if (!charging || !canShoot) return;
  clearInterval(interval);
  charging = false;
  canShoot = false;

  const r = stadium.getBoundingClientRect();
  const x = e.clientX - r.left;
  const y = e.clientY - r.top;

  const depthScale = 0.4;
  const targetX = (x - r.width / 2) * 0.8;
  const targetY = (y - 40);

  ball.style.transform =
    `translateX(calc(-50% + ${targetX}px))
     translateY(${targetY}px)`;
  ball.style.width = '10px';
  ball.style.height = '10px';

  const save = Math.random() < 0.4;
  if (save) {
    keeper.style.transform =
      `translateX(calc(-50% + ${targetX * 0.6}px))`;
  }

  setTimeout(() => {
    result.innerText = save ? '❌ СЕЙВ' : '⚽ ГОООЛ';
  }, 500);

  setTimeout(resetShot, 900);
});

function resetShot() {
  ball.style.transform = 'translateX(-50%)';
  ball.style.width = '26px';
  ball.style.height = '26px';
  keeper.style.transform = 'translateX(-50%)';
  aim.style.display = 'none';
  powerFill.style.width = '0%';
  result.innerText = 'Наведи и бей';
  canShoot = true;
}
</script>

</body>
</html>
